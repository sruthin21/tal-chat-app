version: '3.9'

services:
  mongo_db:
      container_name: db_container
      image: mongo:latest
      restart: always
      ports:
       - 2717:27017
      volumes: 
        - mongo_db:/data/db
  
  api:
    build: .
    ports:
      - 8080:8080
    environment:
      PORT: ${PORT}
      MONGODB_URI: ${MONGODB_URI}
      NODE_ENV: ${NODE_ENV}

      CORS_ORIGIN: ${CORS_ORIGIN}
      BACKEND_HOST_URL: ${BACKEND_HOST_URL}

      ACCESS_TOKEN_SECRET: ${ACCESS_TOKEN_SECRET}
      ACCESS_TOKEN_EXPIRY: ${ACCESS_TOKEN_EXPIRY}
      REFRESH_TOKEN_SECRET: ${REFRESH_TOKEN_SECRET}
      REFRESH_TOKEN_EXPIRY: ${REFRESH_TOKEN_EXPIRY}

      RESEND_API_KEY: ${RESEND_API_KEY}
      FORGOT_PASSWORD_REDIRECT_URL: ${FORGOT_PASSWORD_REDIRECT_URL}

    
    depends_on:
     - mongo_db

volumes:
   mongo_db: {}
